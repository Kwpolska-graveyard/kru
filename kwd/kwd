#!/usr/bin/perl
# KWD/KwDocumentor
# Part of KRU
# Copyright Kwpolska 2010. Licensed on GPLv3.
# Portions copyright Enlik 2010.
use warnings;
use strict;
use Term::ANSIColor qw(:constants);
# QUOTE-UNQUOTE CONFIG
my $template = "./kwdtemplate"; # where lies the template file?
# END OF CONFIG
#colorful UI
sub pb {
my $value=shift;
print BOLD, CYAN, '['.$value.'] ', RESET;
}
sub py {
my $value=shift;
print BOLD, YELLOW, '['.$value.'] ', RESET;
}
sub pg {
my $value=shift;
print BOLD, GREEN '['.$value.'] ', RESET;
}
pg("*");
print "KWD/KwDocumentator\n";
pg("*");
print "Copyright Kwpolska 2010. Licensed on GPLv3.\n";
#template:
#pb("id");
#print "what\n"
#py(">");
#my $value = <STDIN>;
pb("1");
print "Main program information\n";
py(">");
my $maininfo = <STDIN>;
pb("2");
print "Purpose\n";
py(">");
my $purpose = <STDIN>;
pb("3");
print "Install instructions\n";
py(">");
my $instructions = <STDIN>;
pb("4");
print "Additional notes - leave empty if needed\n";
py(">");
my $notesbase = <STDIN>;
pb("5");
print "Save the file as:\n";
py(">");
my $location = <STDIN>;
pg("*");
print "Preparing...";
chomp($maininfo);
$maininfo =~ s/\\n/\n/;
chomp($purpose);
$purpose =~ s/\\n/\n/;
chomp($instructions);
$instructions =~ s/\\n/\n/;
chomp($location);
chomp($notesbase);
$notesbase =~ s/\\n/\n/;
my $notes = '';
#comment the 3 lines below if you don't want to use notes
#if you do, edit the template to your own
if ($notesbase ne "") {
$notes = "\nNOTES:\n--------------\n$notesbase\n";
}
print " done\n";
pg("*");
print "Reading the template...";
open(my $from, '<', $template) or die "FAILED\nCan't read the template! $!\n";
print " done\n";
pg("*");
print "Creating the destination file...";
open(my $to, '>', $location) or die "FAILED\nCan't create the destination file! $!\n";
print " done\n";
pg("*");
print "Replacing the strings...";
while(<$from>) {
	$_ =~ s/T_PURPOSE/$purpose/;
	$_ =~ s/T_MAININFO/$maininfo/;
	$_ =~ s/T_INSTRUCTIONS/$instructions/;
	$_ =~ s/T_NOTES/$notes/;
	print $to $_;
}
print " done\n";
pg("*");
print "Your file has been generated.\n";
